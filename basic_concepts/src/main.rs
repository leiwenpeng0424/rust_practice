mod control_flow;

fn main() {
    // rustå£°æ˜Žçš„å˜é‡éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ— æ³•ç»è¡Œé‡æ–°çš„èµ‹å€¼ã€‚
    let a = 12;
    // ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­æŠ¥å‡ºå¤§å¤šæ•°çš„é”™è¯¯ï¼Œç¡®ä¿è¿è¡Œæ—¶ä¸ä¼šå‡ºçŽ°ä½Žçº§çš„é”™è¯¯ã€‚

    println!("the value of a is {}", a);

    // é»˜è®¤é‡‡å–immutableçš„å˜é‡å¯ä»¥ååšåˆ°è§„é¿ä¸€äº›éžå¸¸éš¾è¿½æŸ¥çš„bugï¼Œ
    // å¦‚æžœä½ æƒ³å°†immutableçš„å˜é‡è½¬æ¢æˆmutableçš„è¯ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šé’ˆå¯¹ä½ çš„ä»£ç ç»™å‡ºç¡®å®šä¿¡æ¯ï¼Œ
    // é¿å…å˜é‡è¢«é”™è¯¯åœ°ä½¿ç”¨ã€‚

    let a = 13;
    println!("the value of a is {}", a);

    // ä½†æ˜¯ï¼Œå¯å˜çš„å˜é‡æ˜¯éžå¸¸æœ‰ç”¨çš„ä¸€ç§ç‰¹æ€§
    // rust æä¾›äº† mut å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªå¯å˜çš„å˜é‡
    let mut a = 14;

    println!("the value of a is {}", a);

    a = 15;

    println!("the value of a is {}", a);

    // ------- Constants and Variables ---------
    // å¸¸é‡çš„å£°æ˜Žåœ¨ rust ä¸­æ˜¯æ— æ³•ä½¿ç”¨ mut ä¿®é¥°çš„ã€‚
    // å¸¸é‡ä¼šä¸€ç›´å­˜åœ¨äºŽå£°æ˜Žæ—¶çš„ä½œç”¨åŸŸä¸­ï¼ŒæŒç»­æ•´ä¸ªruståº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚
    // å¸¸é‡é€‚ç”¨äºŽä¸€äº›éœ€è¦hardcodeçš„åœ°æ–¹ï¼Œå¹¶ä¸”å°†å¸¸é‡å£°æ˜Žåœ¨åŒä¸€å¤„ï¼Œæ–¹ä¾¿åŽé¢ç»Ÿä¸€ä¿®æ”¹ã€‚
    const MAX_AGE: i8 = 120;

    // -------- Shadowing --------
    // åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨letæ¥å£°æ˜Žå¤šä¸ªåŒåçš„å˜é‡ï¼Œ
    // ä¸‹é¢çš„letå£°æ˜Žä¼šéšè—ä¸Šé¢çš„letå£°æ˜Žï¼Œä¼šåˆ›å»ºæ–°çš„å€¼ï¼Œä½†æ˜¯å¤ç”¨åç§°ã€‚
    // ä½†æ˜¯æ–°çš„å€¼ä¾ç„¶æ˜¯ä¸å¯å˜çš„ï¼Œè¿™ä¸ªå°±æ˜¯ä½¿ç”¨ shadowing å’Œ mut çš„å…³é”®åŒºåˆ«ã€‚
    // å¦ä¸€ä¸ªåŒºåˆ«å°±æ˜¯ shadowing æ˜¯åˆ›å»ºäº†æ–°çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜è¿™ä¸ªæ–°çš„å˜é‡å€¼çš„ç±»åž‹ã€‚
    let x = 1;
    let x = x + 1;
    let x = x * x;
    println!("the value of x is {}", x);

    let x: String = String::from(x.to_string());
    println!("the value of x is {}", x);

    println!("--------------------------------------");

    // ------- æ•°æ®ç±»åž‹ --------
    // rustä¸­ï¼Œæ¯ä¸€ä¸ªå˜é‡éƒ½ä¼šä¸€ä¸ªæŒ‡å®šçš„ç±»åž‹ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½çŸ¥é“è¯¥å¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚
    // rust æ˜¯ä¸€é—¨ï¼Œé™æ€ç±»åž‹çš„è¯­è¨€

    // ä¸‹é¢æ˜¯ä¸¤ç§æ•°æ®ç±»åž‹çš„å­é›†ï¼Œæ ‡é‡(scalar)å’Œå¤åˆ(compound)
    // rustç¼–è¯‘å™¨éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µçŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»åž‹ï¼Œæ ¹æ®å€¼ä»¥åŠä½¿ç”¨æ–¹å¼
    // ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æŽ¨æ–­å‡ºå˜é‡çš„ç±»åž‹ã€‚
    // ä½†æ˜¯æ›´å¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æŒ‡å®šå˜é‡çš„ç±»åž‹ã€‚

    // æ ‡é‡ (scalar)
    // ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚rust æœ‰å››ä¸­åŸºæœ¬çš„æ ‡é‡ï¼šæ•´åž‹ï¼Œæµ®ç‚¹åž‹ï¼Œå¸ƒå°”å’Œå­—ç¬¦ä¸²ã€‚

    // æ•´åž‹
    //  æœ‰ç¬¦å·ä½æ•´åž‹ (è´Ÿæ•°) i8/i16/i32/i64/i128/isize
    //  æ— ç¬¦å·ä½æ•´åž‹ (æ­£æ•°) u8/u16/u32/u64/u128/usize

    //  æ¯ä¸€ä¸ªæœ‰ç¬¦å·æ•´åž‹éƒ½å¯ä»¥å­˜å‚¨ä¸€ä¸ª -(2^(n-1)) åˆ° (2^(n-1))-1,
    //  i8å¯ä»¥è¡¨ç¤ºçš„èŒƒå›´å°±æ˜¯ -2^7 åˆ° (2^7) - 1
    // 	u8å¯ä»¥è¡¨ç¤ºçš„èŒƒå›´å°±æ˜¯ 0 åˆ° (2^7) - 1

    //  isizeå’ŒusizeæŒ‡çš„æ˜¯æ ¹æ®è¿è¡Œç¨‹åºçš„è®¡ç®—æœºçš„æž¶æž„æ¥å†³å®šï¼Œ32ä½æˆ–è€…æ˜¯64ä½ã€‚

    // é™¤äº†byteä¹‹å¤–çš„æ‰€æœ‰æ•°å­—å­—é¢é‡éƒ½å¯ä»¥ä½¿ç”¨ç±»åž‹åŽç¼€ã€‚
    let _y = 98_222; // åè¿›åˆ¶ å¯ä»¥ä½¿ç”¨çŸ­ä¸‹åˆ’çº¿ä½œä¸ºåˆ†å‰²ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚
    println!("{}", _y);
    let _y = 0xff; // åå…­è¿›åˆ¶
    let _y = 0o77; // å…«è¿›åˆ¶
    let _y = 0b1111_0000; // äºŒè¿›åˆ¶ Binary
    let _y = b'1'; // å•å­—èŠ‚å­—ç¬¦ Byte

    println!("{}", _y);

    // æ•´åž‹æº¢å‡º
    // å¦‚æžœä½¿ç”¨äº†ç±»åž‹ u8 ï¼Œè¡¨ç¤ºçš„æ•°å­—èŒƒå›´å°±æ˜¯0 - 255ï¼Œå¦‚æžœä½ è®¾ç½®äº†256ï¼Œ
    // å°±ä¼šé€ æˆæ•´åž‹æº¢å‡ºï¼Œå¼€å‘æ¨¡å¼ä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæŠ›å‡º panic é”™è¯¯ï¼Œ
    // æž„å»ºæ¨¡å¼ä¸‹ï¼Œä¼šæ‰§è¡ŒäºŒè¿›åˆ¶è¡¥ç çš„åŒ…è£…ã€‚256 ä¼šå˜æˆ 0ï¼Œ257 ä¼šè½¬æ¢æˆ 1ã€‚

    // æµ®ç‚¹åž‹
    // æµ®ç‚¹åŒ…å«ä¸¤ç§ï¼Œf32/f64ï¼Œé»˜è®¤æ˜¯f64é€Ÿåº¦å·®ä¸å¤šï¼Œå¹¶ä¸”ç²¾åº¦æ›´é«˜ã€‚
    // æµ®ç‚¹æ•°é‡‡ç”¨ IEEE-754 æ ‡å‡†ã€‚f32æ˜¯å•ç²¾åº¦ï¼Œf64æ˜¯åŒç²¾åº¦ã€‚

    let _z = 16.2;
    let _z = _z + 20.1;
    let _z = _z - 10.22;
    let _z = _z * 0.5;
    let _z = _z / 32.21;
    // let _z = _z % 10;
    println!("{}", _z);

    // å¸ƒå°”åž‹
    // å¸ƒå°”åž‹åªæœ‰ä¸¤ä¸ªå€¼ï¼Œtrue/false

    let _is_ture = true;
    let _is_false: bool = false;

    // å­—ç¬¦ç±»åž‹
    // Rustçš„charç±»åž‹æ˜¯è¯­è¨€ä¸­æœ€åŽŸå£°çš„å­—æ¯ç±»åž‹ã€‚
    // Charç±»åž‹çš„å¤§å°æ˜¯å››ä¸ªå­—èŠ‚ï¼Œ
    // Rust ä¸­ï¼Œæ±‰è¯­ï¼Œæ—¥è¯­ç­‰å­—ç¬¦ï¼Œemojiä»¥åŠé›¶é•¿åº¦çš„ç©ºç™½å­—ç¬¦éƒ½æ˜¯æœ‰æ•ˆçš„ char å€¼ã€‚
    let _a = 'z';
    let _a = 'ðŸ¦¸';
    let _a = 'ä½ ';

    // å¤åˆç±»åž‹
    // å¤åˆç±»åž‹æ˜¯ç”±å¤šä¸ªå€¼ç»„æˆçš„ç±»åž‹ã€‚
    // å…ƒç»„(Tuple)å’Œæ•°ç»„(Array)

    // å…ƒç»„æ˜¯å…·æœ‰å›ºå®šé•¿åº¦çš„ï¼Œå†…éƒ¨å¯ä»¥å­˜å‚¨ä¸åŒç±»åž‹çš„å€¼ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜Žåˆ¶å®šäº†é•¿åº¦ï¼Œå°±ä¸å¯æ”¹å˜ã€‚
    // å¹¶ä¸”å†…éƒ¨æ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªå›ºå®šçš„ç±»åž‹ã€‚
    let _b: (i32, i32, i32) = (1, 1, 1);
    // èŽ·å–tupleä¸­çš„å€¼å¯ä»¥é‡‡ç”¨ç»“æž„çš„æ–¹æ³•
    let (_a, _d, _c) = _b;
    println!("{} -> {} -> {}", _a, _d, _c);
    // ä½¿ç”¨ . æ“ä½œç¬¦æ ¹æ®ä½ç½®æ¥å–å€¼ï¼Œä½ç½®ä»Ž 0 å¼€å§‹è®¡ç®—
    let _f = _b.0;
    let _e = _b.1;

    // æ•°ç»„
    // æ•°ç»„ä¸Žå…ƒç»„ä¸åŒï¼Œå†…éƒ¨çš„å…ƒç´ å¿…é¡»è¦å…·å¤‡ç›¸åŒçš„æ•°æ®ç±»åž‹ã€‚
    // ç›¸åŒçš„æ˜¯ï¼Œæ•°ç»„ä¹Ÿæ˜¯å£°æ˜Žçš„æ—¶å€™å›ºå®šé•¿åº¦ï¼Œåˆ‡æ— æ³•åŠ¨æ€åœ°ä¿®æ”¹ã€‚
    let _f = [1, 2, 3, 4];
    // rust è¿˜å­˜åœ¨ä¸€ä¸ª Vectorçš„ç±»åž‹ï¼ŒVector å°±æ˜¯å¢žå¼ºç‰ˆçš„ Arrayï¼Œå¯å˜é•¿ï¼Œå†…éƒ¨å¯ä»¥å­˜æ”¾ä¸åŒç±»åž‹çš„å…ƒç´ ã€‚
    // æ•°ç»„å£°æ˜Žçš„ä¸€ä¸ªæŠ€å·§, let list: [Type;Count] = [...],
    // å¯ä»¥ç”¨åœ¨ç±»åž‹æ³¨é‡Šä¸­ï¼ŒåŒæ ·å¯ä»¥ç”¨åœ¨å£°æ˜Žçš„å€¼ï¼Œ let list = [3; 5];
    let _f: [i32; 5] = [1, 2, 3, 4, 5];
    // è®¿é—®æ•°ç»„é€šè¿‡ list[index]çš„å½¢å¼

    println!("{}", output_number());
    expression_example();
    let x = expressions_example_2();
    println!("{:?}", x);
    println!("---------------------");
    println!("{}", control_flow::control_flow::produce_num_five());
    control_flow::control_flow::if_else(3);
    control_flow::control_flow::let_if(true);
    // control_flow::control_flow::loop_code();
    control_flow::control_flow::while_code();
    control_flow::control_flow::for_code();
    println!("{:?}", control_flow::control_flow::convert_c_to_h(25.5));
    println!("{:?}", control_flow::control_flow::fibonacci(10));
}

// å‡½æ•°ï¼Œé€šè¿‡fnå…³é”®å­—å®šä¹‰ï¼Œå‡½æ•°åç§°åŽè·Ÿç€åœ†æ‹¬å·ï¼Œç„¶åŽè·Ÿç€ä¸€å¯¹å¤§æ‹¬å·ï¼Œæ ‡è¯†ç€å‡½æ•°ä½“çš„å¼€å§‹ä¸Žç»“å°¾ã€‚
// å®šä¹‰å®Œæˆä¹‹åŽï¼Œå¯ä»¥åœ¨mainå‡½æ•°ä¸­è°ƒç”¨ã€‚
fn output_number() -> i32 {
    23
}

// å‡½æ•°å‚æ•°ï¼Œå‡½æ•°å‚æ•°æ˜¯ä¸€ç§ç‰¹æ®Šå˜é‡ï¼Œæ˜¯å‡½æ•°ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œ
// å½“å‡½æ•°æ‹¥æœ‰å‚æ•°æ—¶ï¼Œå¯ä»¥ä¸ºè¿™äº›å‚æ•°æä¾›å…·ä½“çš„å€¼ã€‚
// å¤šå‚æ•°ä½¿ç”¨éƒ½å¥½åˆ†å‰²
fn output_number_2(num1: i32, num2: i32) -> i32 {
    num1 + num2
}

// è¯­å¥ä¸Žè¡¨è¾¾å¼
// Rustæ˜¯ä¸€é—¨åŸºäºŽè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œ
// åœ¨å…¶ä»–çš„è¯­è¨€ä¸­ï¼Œè¡¨è¾¾å¼å’Œè¯­å¥å¯èƒ½å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ
// ä½†æ˜¯åœ¨Rustä¸­ç†è§£è¡¨è¾¾å¼(expressions)å’Œè¯­å¥(statements)çš„åŒºåˆ«æ˜¯å¾ˆé‡è¦çš„ã€‚
// ---------------------
// è¯­å¥ï¼Œæ˜¯æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä½†æ˜¯ä¸è¿”å›žå€¼çš„æŒ‡ä»¤ã€‚
// è¡¨è¾¾å¼ï¼Œéœ€è¦è®¡ç®—å¹¶å‚ç”Ÿä¸€ä¸ªå€¼ã€‚
fn expression_example() {
    let _x = 6; // è¯­å¥ï¼Œåªå£°æ˜Žäº†ä¸€ä¸ªå˜é‡ï¼Œä¸è¿”å›žå˜é‡ã€‚
                // let _y = _x = 6; // è¯¥è¯­å¥å†Rustä¸­å›žæŠ¥é”™ï¼Œä½†æ˜¯åœ¨Cï¼ŒRubyï¼ŒJavaScriptä¸­éƒ½ä¼šæˆåŠŸï¼Œ_yå’Œ_xéƒ½æ˜¯6ã€‚

    // è¡¨è¾¾å¼ä¼šè®¡ç®—å€¼ã€‚

    let x = 5;

    let y = {
        let x = 3;
        x + 1 // è¡¨è¾¾å¼è¿”å›ž x+1 çš„å€¼ï¼Œèµ‹å€¼ç»™ yã€‚
    };

    println!("{:?}", y);
    println!("{:?}", x);
}
// åœ¨Rustä¸­ï¼Œå¤§éƒ¨åˆ†ç¼–å†™çš„ä»£ç éƒ½å°†ä¼šæ˜¯è¡¨è¾¾å¼ï¼Œ
// ä¸Šé¢ç¼–å†™çš„è¯­å¥ let _x = 6; ç­‰å¼å³è¾¹çš„å…­å…¶å®žå°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›ž6ï¼Œå¹¶èµ‹å€¼ç»™å³è¾¹å£°æ˜Žçš„å˜é‡ _xã€‚
// æ‰€ä»¥ï¼Œè¡¨è¾¾å¼å¯ä»¥æ˜¯è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚
// å‡½æ•°è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬ç”¨äºŽåˆ›å»ºæ–°ä½œç”¨åŸŸçš„å¤§æ‹¬å·{}ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚
// æ³¨æ„ä¸Šé¢å‡½æ•°ä½“ä¸­çš„
/*
    let y = {
        let x = 3;
        x + 1 // å¦‚æžœæœ€åŽç»“å°¾åŠ äº†åˆ†å·ï¼Œé‚£å®ƒå°±ä¸æ˜¯è¡¨è¾¾å¼ï¼Œè€Œæ˜¯ä¸€ä¸ªè¯­å¥ã€‚
        // è¿™ä¸Žä¸Žå¤§å¤šæ•°è¯­è¨€çš„å†™æ³•ä¸åŒã€‚åŠ äº†åˆ†å·å°±è¡¨ç¤ºä¸€ä¸ªè¯­å¥ï¼Œä¸åŠ å°±è¡¨ç¤ºä¸€ä¸ªè¡¨è¾¾å¼ã€‚
    }
*/

// å…·æœ‰è¿”å›žå€¼çš„å‡½æ•°
fn expressions_example_2() -> i8 {
    5
}
